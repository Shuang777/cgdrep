\chapter{表格、图片和代码的格式}
我们暂定了表格、图片和代码的格式。这并不是最终版，欢迎提出意见。

一般的表格、图片和代码都当有一对 Caption 和 Label。Caption 是这个表、图或代码的名字，其字号比正文小半号。Label 是引用它时候的代号，Label 的内容并不出现在排版后的\filename{pdf}页面上。以下分别讲如何实现。

\section{表格}
一般，我们要求表格采用三线表，首行为其 header，用黑体。字号比正文小半号，位置居中。如表~\ref{triline}：
\begin{ctable}{triline}{三线表}{llll}
 版本 & 日期       & 负责人       & 备注 \\ \hline 
 1.0  & 2013.12.24 & 沈忱、纪冬梅 & 初稿\\
 1.1  & 2013.12.25 & 赵军        & 二稿  \\
\end{ctable}

实现这样的表及其浮动位置，可以用 Cogenda 自己制作的宏 ctable，其语法为：
\begin{lstlisting}[language={[LaTeX]TeX},caption={ctable 语法}]
\begin{ctable}{Label}{Caption}{Alignments}
 第一行（表格项目）  \\ \hline 
 第二行 \\
.....
\end{ctable}\end{lstlisting}

则表~\ref{triline} 的完整语法为：
\begin{lstlisting}[language={[LaTeX]TeX},caption={ctable 示例}]
\begin{ctable}{triline}{三线表}{llll}
 版本 & 日期       & 负责人       & 备注 \\ \hline 
 1.0  & 2013.12.24 & 沈忱、纪冬梅 & 初稿\\
 1.1  & 2013.12.25 & 赵军        & 二稿  \\
\end{ctable}
\end{lstlisting}

如果你不想局限于 ctable 的功能，也可以用一般的 \LaTeX 表格语法（用了 tabu 宏包），表~\ref{triline} 的一般\LaTeX 语法为：
\begin{lstlisting}[language={[LaTeX]TeX},caption={三线表的一般\LaTeX 语法示例}]
\begin{table}[htbp]\caption{\label{triline} 三线表}
\centering\small\begin{tabu}{llll}\thickhline\rowfont{\bfseries}
 版本  & 日期       & 负责人      & 备注 \\ \hline
 1.0  & 2013.12.24 & 沈忱、纪冬梅 & 初稿 \\
 1.1  & 2013.12.25 & 赵军        & 二稿 \\
\thickhline\end{tabu}\end{table}
\end{lstlisting}

\section{图片}
插入图片语法简单，这里没有设置自己的宏，而是用的是普通语法：
\begin{lstlisting}[language={[LaTeX]TeX},caption={插入图片语法示例}]
\begin{figure}[htbp]\centering
\includegraphics[width=0.5\textwidth]{file.jpg} 
\caption{\label{Label}Caption}
\end{figure}\end{lstlisting}
对于图片的大小控制，当用户没有特别需求的时候，建议采用\filename{textwidth}的倍数方式。

\section{代码}
先给出一段文档中插入 Pascal 代码的样子：
\begin{lstlisting}[language=Pascal,caption={Pascal 代码示例},label=PascalExample]
for i:=maxint to 0 do
begin
{ do nothing }
end;
Write(’Case insensitive ’);
Write(’Pascal keywords.’);
\end{lstlisting}

引用代码的 \LaTeX 语法为：
\begin{lstlisting}[language={[LaTeX]TeX},caption={引用代码的语法}]
\begin{lstlisting}[language=Language,caption={Caption},label=Label]
.......
 （代码内容）
.......
\end{lstlisting }\end{lstlisting}

则如上代码~\ref{PascalExample} 的引用方法为：
\begin{lstlisting}[language={[LaTeX]TeX},caption={引用代码示例}]
\begin{lstlisting}[language=Pascal,caption={Pascal 示例代码},label=PascalExample]
for i:=maxint to 0 do
begin
{ do nothing }
end;
Write(’Case insensitive ’);
Write(’Pascal keywords.’);
\end{lstlisting }
\end{lstlisting}

如果代码比较长，在某个原始代码文件里，可以用如下语法，将整个文件的代码引入：
\begin{lstlisting}[language={[LaTeX]TeX},caption={引入代码文件示例}]
\lstinputlisting[language=Language,label=Label,caption={Caption}]{Filename}
\end{lstlisting}

下面给出 C、Python 和 Bash 代码示例，欢迎提出排版意见。

\begin{lstlisting}[language=C,caption={C 代码示例},label=cLabel]
#include <stdio.h>
#define N 10
/* Block
 * comment */
 
int main()
{
    int i;
 
    // Line comment.
    puts("Hello world!");
 
    for (i = 0; i < N; i++)
    {
        puts("LaTeX is also great for programmers!");
    }
 
    return 0;
}
\end{lstlisting}

\begin{lstlisting}[language=python,caption={Python 代码示例},label=Python]
class BankAccount(object):
    def __init__(self, initial_balance=0):
        self.balance = initial_balance
    def deposit(self, amount):
        self.balance += amount
    def withdraw(self, amount):
        self.balance -= amount
    def overdrawn(self):
        return self.balance < 0
my_account = BankAccount(15)
my_account.withdraw(5)
print my_account.balance
import unittest
def median(pool):
    copy = sorted(pool)
    size = len(copy)
    if size % 2 == 1:
        return copy[(size - 1) / 2]
    else:
        return (copy[size/2 - 1] + copy[size/2]) / 2
class TestMedian(unittest.TestCase):
    def testMedian(self):
        self.failUnlessEqual(median([2, 9, 9, 7, 9, 2, 4, 5, 8]), 7)
if __name__ == '__main__':
    unittest.main()
\end{lstlisting}

\lstinputlisting[language=bash,label=bash.sh, caption={bash 代码示例}]{bash1.sh}

\section{其他}
\subsection{几类特别对象}
有几类特别对象，要在文档里用不同的字体，我们定义了如下字符：
\begin{ctable}{special}{几类特别对象}{lll} 
对象 & 语法示例 & 效果示例 \\ \hline
文件名 & \textbackslash filename\{directory/file.name\} & \filename{directory/file.name} \\
命令名 & \textbackslash command\{xelatex main\} & \command{xelatex main} \\
参数名 & \textbackslash parameter\{Energy\} & \parameter{Energy} \\
用户输入 & \textbackslash userinput\{runApp\} & \userinput{runApp} \\
图形界面菜单 & \textbackslash guimenu\{File > Open\} & \guimenu{File>Open} \\
\end{ctable}

\subsection{Item 列表}
对于三个 item 列表（itemize、enumerate和description），我们都改了间距。如果用户想在每个 item 里放一段落，于是想保留段落间距的话，可以用新定义的环境变量 paraitem。语法为：
\begin{lstlisting}[language={[LaTeX]TeX},caption={保留段落间距的环境变量}]
\begin{paraitem}
\item 第一段。
\item 第二段。
.....
\end{paraitem}
\end{lstlisting}

\subsection{参考文献}
参考文献的内容写入文件 main.bib 中，格式示例：
\begin{lstlisting}[language={sh},caption={参考文献格式示例}]
@article{katz1979history, %%% Label is here.
  title={The History of Stokes's Theorem},
  author={Victor J. Katz},
  journal={Mathematics Magazine},
  volume={52},
  pages={146-156},
  year={1979},
}
\end{lstlisting}

这篇文献的引用方法为 \textbackslash cite\{katz1979history\}。
